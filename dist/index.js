!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define("react-flow",["React"],t):"object"==typeof exports?exports["react-flow"]=t(require("react")):e["react-flow"]=t(e.React)}(window,function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data={}}return r(e,[{key:"add",value:function(e,t){this.data[e]=t}},{key:"del",value:function(e){delete this.data[e]}},{key:"get",value:function(e){return this.data[e]}},{key:"delAll",value:function(){this.data={}}}]),e}());t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={MODE_GLOBAL_PAN:1,MODE_RUBER_BAND_MOVE:2,MODE_RUBER_BAND_ROTATE:3,MODE_RUBER_BAND_RESIZE_UL:4,MODE_RUBER_BAND_RESIZE_UR:5,MODE_RUBER_BAND_RESIZE_DL:6,MODE_RUBER_BAND_RESIZE_DR:7,MODE_RUBER_PADDING:8,MODE_RUBER_ADD_LINK_LEFT:9,MODE_RUBER_ADD_LINK_RIGHT:10,MODE_PAGE_MOVE:11,CLOCKWISE:22,UNCLOCKWISE:23,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_COPY:67,KEY_CUT:88,KEY_PASTE:86,KEY_DELETE:46,RUBBER_BAND_HANDLE_SIZE:5,RUBBER_BAND_EVENT_HANDLE_SIZE:10,RUBBER_BAND_EVENT_HANDLE_SIZE_HALF:5}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.apply(t)}return r(e,[{key:"apply",value:function(e){var t=[1,0,0,1,0,0];e&&(t=e.split(",")),this.a=parseFloat(t[0]),this.b=parseFloat(t[1]),this.c=parseFloat(t[2]),this.d=parseFloat(t[3]),this.e=parseFloat(t[4]),this.f=parseFloat(t[5]),this.transform=this.transform.bind(this),this.rotate=this.rotate.bind(this),this.applyToPoint=this.applyToPoint.bind(this),this._isEqual=this._isEqual.bind(this)}},{key:"flipX",value:function(){return this.transform(-1,0,0,1,0,0)}},{key:"flipY",value:function(){return this.transform(1,0,0,-1,0,0)}},{key:"reset",value:function(){return this.a=this.d=1,this.b=this.c=this.e=this.f=0,this}},{key:"rotate",value:function(e){var t=Math.cos(.017453292519943295*e),n=Math.sin(.017453292519943295*e);return this.transform(t,n,-n,t,0,0)}},{key:"rotateDeg",value:function(e){return this.rotate(.017453292519943295*e)}},{key:"scale",value:function(e,t){return this.transform(e,0,0,t,0,0)}},{key:"scaleX",value:function(e){return this.transform(e,0,0,1,0,0)}},{key:"scaleY",value:function(e){return this.transform(1,0,0,e,0,0)}},{key:"skew",value:function(e,t){return this.transform(1,t,e,1,0,0)}},{key:"skewX",value:function(e){return this.transform(1,0,e,1,0,0)}},{key:"skewY",value:function(e){return this.transform(1,e,0,1,0,0)}},{key:"setTransform",value:function(e,t,n,r,o,a){return this.a=e,this.b=t,this.c=n,this.d=r,this.e=o,this.f=a,this}},{key:"translate",value:function(e,t){return this.transform(1,0,0,1,e,t)}},{key:"transform",value:function(t,n,r,o,a,i){var s=this.a,u=this.b,l=this.c,c=this.d,f=this.e,d=this.f,p=new e;return p.a=s*t+l*n,p.b=u*t+c*n,p.c=s*r+l*o,p.d=u*r+c*o,p.e=s*a+l*i+f,p.f=u*a+c*i+d,p}},{key:"multiply",value:function(t){var n=new e,r=this.a,o=this.b,a=this.c,i=this.d,s=this.e,u=this.f;return n.a=r*t.a+a*t.b,n.b=o*t.a+i*t.b,n.c=r*t.c+a*t.d,n.d=o*t.c+i*t.d,n.e=r*t.e+a*t.f+s,n.f=o*t.e+i*t.f+u,n}},{key:"inverse",value:function(){var t=this.a,n=this.b,r=this.c,o=this.d,a=this.e,i=this.f,s=new e,u=t*o-n*r;return s.a=o/u,s.b=-n/u,s.c=-r/u,s.d=t/u,s.e=(r*i-o*a)/u,s.f=-(t*i-n*a)/u,s}},{key:"interpolate",value:function(t,n){var r=new e;return r.a=this.a+(t.a-this.a)*n,r.b=this.b+(t.b-this.b)*n,r.c=this.c+(t.c-this.c)*n,r.d=this.d+(t.d-this.d)*n,r.e=this.e+(t.e-this.e)*n,r.f=this.f+(t.f-this.f)*n,r}},{key:"applyToPoint",value:function(e,t){return{x:e*this.a+t*this.c+this.e,y:e*this.b+t*this.d+this.f}}},{key:"applyToArray",value:function(e){var t=0,n=void 0,r=void 0,o=[];if("number"==typeof e[0])for(r=e.length;t<r;)n=this.applyToPoint(e[t++],e[t++]),o.push(n.x,n.y);else for(;n=e[t];t++)o.push(this.applyToPoint(n.x,n.y));return o}},{key:"applyToTypedArray",value:function(e){for(var t=0,n=void 0,r=e.length,o=new Float32Array(r);t<r;)n=this.applyToPoint(e[t],e[t+1]),o[t++]=n.x,o[t++]=n.y;return o}},{key:"isIdentity",value:function(){return this._isEqual(this.a,1)&&this._isEqual(this.b,0)&&this._isEqual(this.c,0)&&this._isEqual(this.d,1)&&this._isEqual(this.e,0)&&this._isEqual(this.f,0)}},{key:"isEqual",value:function(e){return this._isEqual(this.a,e.a)&&this._isEqual(this.b,e.b)&&this._isEqual(this.c,e.c)&&this._isEqual(this.d,e.d)&&this._isEqual(this.e,e.e)&&this._isEqual(this.f,e.f)}},{key:"_isEqual",value:function(e,t){return Math.abs(e-t)<1e-14}},{key:"matrixToText",value:function(){return this.a+", "+this.b+", "+this.c+", "+this.d+", "+this.e+", "+this.f}},{key:"trx",get:function(){return this.e},set:function(e){this.e=e}},{key:"try",get:function(){return this.f},set:function(e){this.f=e}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(2)),a=u(n(3)),i=u(n(11)),s=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var l=180/Math.PI,c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"normaliseVector",value:function(e){return Math.abs(e.x)>Math.abs(e.y)?e.x>0?{x:1,y:0}:{x:-1,y:0}:e.y>0?{x:0,y:1}:{x:0,y:-1}}},{key:"calculateDistance",value:function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}},{key:"calculateRotationsAngle",value:function(t,n,r){var o=e.calculateDistance(t,n),a=e.calculateDistance(r,n),i=e.calculateDistance(t,r),s=Math.pow(o,2)+Math.pow(a,2)-Math.pow(i,2),u=2*o*a;return Math.acos(s/u)*l}},{key:"getParentMatrix",value:function(t,n){var r=s.default.get(t).parent;if(!r)return n;var o=s.default.get(r).matrix;return n=n?n.multiply(o):o,e.getParentMatrix(r,n)}},{key:"getCombineMatrix",value:function(t){var n=new a.default(s.default.get(t).transform),r=e.getParentMatrix(t,n);return r||n}},{key:"degrees",value:function(e){return e*l}},{key:"rotateToCenter",value:function(e,t,n,r){return 0!=n&&r?r=(r=(r=r.translate(e,t)).rotate(n)).translate(-e,-t):r}},{key:"scaleToCenter",value:function(e,t,n,r){return 0!=n&&r?r=(r=(r=r.translate(e,t)).scale(n)).translate(-e,-t):r}},{key:"getRotationDirection",value:function(t,n,r){var a={x:n.x-t.x,y:n.y-t.y};return 0===(a=e.normaliseVector(a)).y?t.y-r.y<0?a.x>0?o.default.CLOCKWISE:o.default.UNCLOCKWISE:a.x<0?o.default.CLOCKWISE:o.default.UNCLOCKWISE:t.x-r.x>0?a.y>0?o.default.CLOCKWISE:o.default.UNCLOCKWISE:a.y<0?o.default.CLOCKWISE:o.default.UNCLOCKWISE}},{key:"transfromIncrement",value:function(e,t,n,r){var o=n;o=n?o.multiply(r):r;var a=new i.default(0,0),s=new i.default(e,t),u=o.inverse();return a.matrixTransform(u),s.matrixTransform(u),{dx:s.x-a.x,dy:s.y-a.y}}},{key:"coordinatesGlobalToLocal",value:function(e,t,n,r){var o=new i.default(e,t);return n&&o.matrixTransform(n.inverse()),r&&o.matrixTransform(r.inverse()),o}},{key:"transformToViewPort",value:function(e,t,n,r,o){var a=new i.default(e,t);if(!n||!r)return a;o&&(n=n.multiply(o));var s=n.multiply(r);return a.matrixTransform(s),a}},{key:"viewPorttoObject",value:function(e,t,n,r){var o=new a.default;o.translate(e,t);var i=n||o;return r&&(i=i.multiply(r)),i=i.inverse(),o.multiply(i)}},{key:"calculateRubberBandPosition",value:function(t,n,r,i){if(!t)return{x:0,y:0,w:0,h:0,transform:0};var s=n,u=t;(s=this.calculateTrasformBox(s,r,u,i)).x=s.x-o.default.RUBBER_BAND_HANDLE_SIZE,s.y=s.y-o.default.RUBBER_BAND_HANDLE_SIZE,s.w=s.w+2*o.default.RUBBER_BAND_HANDLE_SIZE,s.h=s.h+2*o.default.RUBBER_BAND_HANDLE_SIZE;var l=new a.default,c=s.x+s.w/2,f=s.y+s.h/2;return l=(l=e.rotateToCenter(c,f,s.angle,l)).matrixToText(),{x:s.x,y:s.y,w:s.w,h:s.h,transform:l}}},{key:"calculateTrasformBox",value:function(t,n,r,o){var a=0;0!=r.b&&(a=e.degrees(Math.atan2(r.b,r.a))),o&&(n=n.multiply(o));var s=t.w/2,u=t.h/2;r=e.rotateToCenter(s,u,-a,r);var l=n.multiply(r),c=new i.default(0,0),f=new i.default(t.w,t.h);return c.matrixTransform(l),f.matrixTransform(l),f.x=f.x-c.x,f.y=f.y-c.y,{x:c.x,y:c.y,w:f.x,h:f.y,angle:a}}},{key:"moveObject",value:function(t,n,r){var o=e.transfromIncrement(t,n,r.viewportMtx,r.selectedMtx),a=r.selectedMtx;return{matrix:a=a.translate(-o.dx,-o.dy),box:null}}},{key:"checkConstrains",value:function(t,n,r){if(!r)return!0;var o=new i.default(0,0),a=new i.default(t.w,0),s=new i.default(0,t.h),u=new i.default(t.w,t.h);return o.matrixTransform(n),!!e.isPointInBox(o,r)&&(a.matrixTransform(n),!!e.isPointInBox(a,r)&&(s.matrixTransform(n),!!e.isPointInBox(s,r)&&(u.matrixTransform(n),!!e.isPointInBox(u,r))))}},{key:"isPointInBox",value:function(e,t){return!(e.x<0||e.y<0)&&!(e.x>t.w||e.y>t.h)}},{key:"rotateObject",value:function(t,n,r,a,i){var s=i.box,u=s.x+s.w/2,l=s.y+s.h/2,c={x:r,y:a},f={x:t,y:n},d=e.transformToViewPort(u,l,i.viewportMtx,i.selectedMtx,i.parentMtx),p=e.getRotationDirection(c,f,d),h=e.calculateRotationsAngle(c,d,f);h=p==o.default.CLOCKWISE?h:-h;var y=i.selectedMtx;return{matrix:y=(y=(y=y.translate(u,l)).rotate(h)).translate(-u,-l),box:null}}},{key:"scaleObject",value:function(t,n,r,o){var a=o.box,i=a.x+a.w/2,s=a.y+a.h/2;r||(t=-t,n=-n);var u=e.transfromIncrement(t,n,o.viewportMtx,o.selectedMtx),l=e.transfromIncrement(a.x+a.w-i,a.y+a.h-s,o.viewportMtx,o.selectedMtx),c=e.transfromIncrement(a.x+a.w-u.dx-i,a.y+a.h-u.dy-s,o.viewportMtx,o.selectedMtx);if(!(a.x+a.w-u.dx<i||a.y+a.h-u.dy<s)){var f=c.dx/l.dx,d=c.dy/l.dy,p=o.selectedMtx;return{matrix:p=(p=(p=p.translate(i,s)).scale(f,d)).translate(-i,-s),box:null}}}},{key:"resizeObject",value:function(t,n,r,a){var i=a.box,s=0,u=0,l=e.transfromIncrement(t,n,a.viewportMtx,a.selectedMtx),c=0,f=0,d=a.selectedMtx;switch(r){case o.default.MODE_RUBER_BAND_RESIZE_UL:s=-l.dx,u=-l.dy,c=l.dx,f=l.dy;break;case o.default.MODE_RUBER_BAND_RESIZE_UR:u=-l.dy,c=-l.dx,f=l.dy;break;case o.default.MODE_RUBER_BAND_RESIZE_DL:s=-l.dx,c=l.dx,f=-l.dy;break;case o.default.MODE_RUBER_BAND_RESIZE_DR:c=-l.dx,f=-l.dy}var p={x:0,y:0,w:i.w+c,h:i.h+f};return{matrix:d=d.translate(s,u),box:p}}}]),e}();t.default=c},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=(i=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),a=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(a).concat([o]).join("\n")}var i;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var a=this[o][0];"number"==typeof a&&(r[a]=!0)}for(o=0;o<e.length;o++){var i=e[o];"number"==typeof i[0]&&r[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),t.push(i))}},t}},function(e,t,n){var r,o,a={},i=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),s=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),u=null,l=0,c=[],f=n(14);function d(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=a[r.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(m(r.parts[i],t))}else{var s=[];for(i=0;i<r.parts.length;i++)s.push(m(r.parts[i],t));a[r.id]={id:r.id,refs:1,parts:s}}}}function p(e,t){for(var n=[],r={},o=0;o<e.length;o++){var a=e[o],i=t.base?a[0]+t.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};r[i]?r[i].parts.push(s):n.push(r[i]={id:i,parts:[s]})}return n}function h(e,t){var n=s(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=c[c.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),c.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=s(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,o)}}function y(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function b(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),v(t,e.attrs),h(e,t),t}function v(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function m(e,t){var n,r,o,a;if(t.transform&&e.css){if(!(a=t.transform(e.css)))return function(){};e.css=a}if(t.singleton){var i=l++;n=u||(u=b(t)),r=w.bind(null,n,i,!1),o=w.bind(null,n,i,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",v(t,e.attrs),h(e,t),t}(t),r=function(e,t,n){var r=n.css,o=n.sourceMap,a=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||a)&&(r=f(r));o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var i=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(i),s&&URL.revokeObjectURL(s)}.bind(null,n,t),o=function(){y(n),n.href&&URL.revokeObjectURL(n.href)}):(n=b(t),r=function(e,t){var n=t.css,r=t.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){y(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=i()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=p(e,t);return d(n,t),function(e){for(var r=[],o=0;o<n.length;o++){var i=n[o];(s=a[i.id]).refs--,r.push(s)}e&&d(p(e,t),t);for(o=0;o<r.length;o++){var s;if(0===(s=r[o]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete a[s.id]}}}};var _,E=(_=[],function(e,t){return _[e]=t,_.filter(Boolean).join("\n")});function w(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=E(t,o);else{var a=document.createTextNode(o),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ObjectTypes={TYPE_ITEM:0,TYPE_LINK:1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=p(o),i=p(n(9)),s=p(n(10)),u=p(n(2)),l=p(n(4)),c=p(n(15)),f=p(n(16)),d=p(n(3));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(){return h(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,o.Component),r(t,[{key:"shouldComponentUpdate",value:function(e,t){return!1}},{key:"render",value:function(){return a.default.createElement("svg",{x:"0",y:"0",width:"100%",height:"100%"},a.default.createElement("g",null,a.default.createElement("defs",null,a.default.createElement("pattern",{id:"smallGrid",width:"8",height:"8",patternUnits:"userSpaceOnUse"},a.default.createElement("path",{d:"M 8 0 L 0 0 0 8",fill:"none",stroke:"white",strokeWidth:"0.5"})),a.default.createElement("pattern",{id:"grid",width:"80",height:"80",patternUnits:"userSpaceOnUse"},a.default.createElement("rect",{width:"80",height:"80",fill:"url(#smallGrid)"}),a.default.createElement("path",{d:"M 80 0 L 0 0 0 80",fill:"none",stroke:"white",strokeWidth:"1"}))),a.default.createElement("rect",{width:"100%",height:"100%",fill:"silver"}),a.default.createElement("rect",{width:"100%",height:"100%",fill:"url(#grid)"})))}}]),t}(),m=function(e){function t(e){h(this,t);var n=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.doMouseMove=n.doMouseMove.bind(n),n.doGlobalMouseDown=n.doGlobalMouseDown.bind(n),n.doMouseUp=n.doMouseUp.bind(n),n.doMouseWheel=n.doMouseWheel.bind(n),n.doObjectMouseDown=n.doObjectMouseDown.bind(n),n.pan=n.pan.bind(n),n.zoom=n.zoom.bind(n),n.applyMatrix=n.applyMatrix.bind(n),n.doRubberMouseDown=n.doRubberMouseDown.bind(n),n.setDraggingPosition=n.setDraggingPosition.bind(n),n.onDragOver=n.onDragOver.bind(n),n.onDrop=n.onDrop.bind(n),n.onDropIteminPage=n.onDropIteminPage.bind(n),n.onKeyPress=n.onKeyPress.bind(n),n.updateSelectedItem=n.updateSelectedItem.bind(n),n.addItem=n.addItem.bind(n),n.viewPortController=new c.default,n.state={dragging:!1,viewportMtx:new d.default(n.props.viewportMtx),viewportTr:"1,0,0,1,0,0",selectedMtx:null,selectedTr:"",parentMtx:null,box:null},n.draggingPositionX=0,n.draggingPositionY=0,n.mode=u.default.MODE_GLOBAL_PAN,n}return b(t,o.Component),r(t,[{key:"componentDidUpdate",value:function(e,t){this.state.dragging&&!t.dragging?(document.addEventListener("mousemove",this.doMouseMove),document.addEventListener("mouseup",this.doMouseUp)):!this.state.dragging&&t.dragging&&(document.removeEventListener("mousemove",this.doMouseMove),document.removeEventListener("mouseup",this.doMouseUp)),(e.drawingData.selectedItem!=this.props.drawingData.selectedItem||this.props.drawingData.selectedItem&&this.props.drawingData.selectedItem.positionHasChange)&&(this.updateSelectedInfo(this.props.drawingData.selectedItem),this.props.drawingData.selectedItem&&(this.props.drawingData.selectedItem.positionHasChange=!1))}},{key:"doGlobalMouseDown",value:function(e){0===e.button&&(this.setDraggingPosition(e),this.setState({dragging:!0}),this.mode=u.default.MODE_GLOBAL_PAN)}},{key:"doObjectMouseDown",value:function(e,t,n){e.stopPropagation(),this.setDraggingPosition(e),this.setState({dragging:!0}),this.props.onSelectItem(t,n),this.mode=u.default.MODE_RUBER_BAND_MOVE}},{key:"updateSelectedInfo",value:function(e){if(e){var t=null;if(e.objType===ObjectTypes.TYPE_LINK)return t=new d.default(e.transform),void this.setState({selectedMtx:t,selectedTr:t.matrixToText(),parentMtx:null,parentBox:null,item:e,parent:null});t=e.matrix;var n={id:e.id,x:0,y:0,w:e.w,h:e.h};this.setState({viewportTr:this.state.viewportMtx.matrixToText(),selectedMtx:t,selectedTr:t.matrixToText(),box:n,item:e})}else this.setState({selectedMtx:new d.default,selectedTr:"1,0,0,1,0,0",parentMtx:null,parentBox:null,item:e,parent:null})}},{key:"doRubberMouseDown",value:function(e,t,n){if(e.stopPropagation(),this.setDraggingPosition(e),this.setState({dragging:!0}),this.mode=t,t===u.default.MODE_RUBER_ADD_LINK_LEFT||t===u.default.MODE_RUBER_ADD_LINK_RIGHT){var r=e.clientX-this.refs.container.offsetLeft,o=e.clientY-this.refs.container.offsetTop,a=l.default.coordinatesGlobalToLocal(r,o,this.state.viewportMtx),i=t===u.default.MODE_RUBER_ADD_LINK_LEFT?ConnectorSides.TYPE_LEFT:ConnectorSides.TYPE_RIGHT;this.mode=u.default.MODE_RUBER_BAND_MOVE;var s="1,0,0,1,"+a.x+","+a.y,c={objType:ObjectTypes.TYPE_LINK,startItem:n,startSide:i,transform:s};this.props.onAddItem(c,parent)}}},{key:"doMouseMove",value:function(e){if(this.state.dragging){e.stopPropagation();var t=e.clientX-170,n=e.clientY-57,r=this.draggingPositionX-t,o=this.draggingPositionY-n;switch(this.mode){case u.default.MODE_GLOBAL_PAN:this.pan(r,o);break;case u.default.MODE_RUBER_BAND_MOVE:if(this.state.isManaged)return;this.updateSelectedItem(l.default.moveObject(r,o,this.state));break;case u.default.MODE_RUBER_BAND_ROTATE:if(this.state.isManaged||this.state.isContainer)return;this.updateSelectedItem(l.default.rotateObject(t,n,this.draggingPositionX,this.draggingPositionY,this.state));break;case u.default.MODE_RUBER_BAND_RESIZE_UL:case u.default.MODE_RUBER_BAND_RESIZE_UR:case u.default.MODE_RUBER_BAND_RESIZE_DL:case u.default.MODE_RUBER_BAND_RESIZE_DR:var a=l.default.resizeObject(r,o,this.mode,this.state);this.state.isContainer&&(LayoutHelper.calculate(this.state.item),this.state.item.w=a.box.w,this.state.item.h=a.box.h),this.state.isManaged&&(this.state.item.w=a.box.w,this.state.item.h=a.box.h,this.state.item.isDirty=!0,LayoutHelper.calculate(this.state.parent),a.matrix=new d.default(this.state.item.transform)),this.updateSelectedItem(a)}this.setDraggingPosition(e)}}},{key:"doMouseUp",value:function(e){this.setState({dragging:!1}),this.props.drawingData.selectedItem&&this.props.onChangeProperty(this.props.drawingData.selectedItem,"position",{transform:this.state.selectedTr,box:this.state.box})}},{key:"doMouseWheel",value:function(e){e.preventDefault();var t=e.clientX-this.refs.container.offsetLeft,n=e.clientY-this.refs.container.offsetTop,r=e.deltaY>0?1.05:.95;this.zoom(r,t,n)}},{key:"ownEvent",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"onDragOver",value:function(e){e.preventDefault()}},{key:"onDrop",value:function(e){var t=parseInt(e.dataTransfer.getData("objtype"));if(t==ObjectTypes.TYPE_PAGE||t==ObjectTypes.TYPE_ACTION||t==ObjectTypes.TYPE_REDUCER){var n=e.clientX-this.refs.container.offsetLeft,r=e.clientY-this.refs.container.offsetTop,o=l.default.coordinatesGlobalToLocal(n,r,this.state.viewportMtx,null),a="1, 0, 0, 1, "+o.x+", "+o.y;this.addItem(e,null,a)}}},{key:"onDropIteminPage",value:function(e,t){var n=l.default.getCombineMatrix(t.id),r=e.clientX-this.refs.container.offsetLeft,o=e.clientY-this.refs.container.offsetTop,a=l.default.coordinatesGlobalToLocal(r,o,this.state.viewportMtx,n),i="1, 0, 0, 1, "+a.x+", "+a.y;this.addItem(e,t,i)}},{key:"addItem",value:function(e,t,n){var r=parseInt(e.dataTransfer.getData("type")),o=e.dataTransfer.getData("subtype"),a=parseInt(e.dataTransfer.getData("objtype")),i={name:e.dataTransfer.getData("name"),type:r,objType:a,subtype:o,transform:n};this.props.onAddItem(i,t)}},{key:"updateSelectedItem",value:function(e){var t=e.matrix;e.box&&(e.box.id=this.state.box.id);var n=e.box?e.box:this.state.box;this.setState({selectedMtx:t,selectedTr:t.matrixToText(),box:n})}},{key:"pan",value:function(e,t){this.viewPortController.pan(e,t,this.state.viewportMtx),this.applyMatrix()}},{key:"zoom",value:function(e,t,n){this.viewPortController.zoom(e,t,n,this.state.viewportMtx),this.applyMatrix()}},{key:"applyMatrix",value:function(){var e=this.state.viewportMtx.matrixToText();this.setState({viewportTr:e})}},{key:"setDraggingPosition",value:function(e){this.draggingPositionX=e.clientX-170,this.draggingPositionY=e.clientY-57}},{key:"render",value:function(){return a.default.createElement("div",{ref:"container",onDragOver:this.onDragOver,onDrop:this.onDrop,style:{position:"relative",userSelect:"none",height:"100%",outline:0},tabIndex:"0"},a.default.createElement("div",{id:"viewport",ref:"mainSvg",x:0,y:0,width:"100%",style:{position:"relative",userSelect:"none",height:"100%"},onMouseDown:this.doGlobalMouseDown,onWheel:this.doMouseWheel},a.default.createElement("div",{style:{transform:"matrix("+this.state.viewportTr+")",position:"absolute"}},a.default.createElement(i.default,{selectedItem:this.props.drawingData.selectedItem,command:this.props.drawingData.selectedItem?this.props.drawingData.selectedItem.command:null,selectedTr:this.state.selectedTr,selectedBox:this.state.box,item:this.props.drawingData.root,children:this.props.drawingData.root.data,doObjectMouseDown:this.doObjectMouseDown,onDropIteminPage:this.onDropIteminPage,onAddLink:this.doRubberMouseDown})),a.default.createElement("svg",{id:"LinkManager",style:{pointerEvents:"none",position:"absolute"},width:"100%",height:"100%"},a.default.createElement("defs",null,a.default.createElement("marker",{id:"arrow",viewBox:"0 0 10 10",refX:"5",refY:"5",markerWidth:"4",markerHeight:"4",orient:"auto-start-reverse"},a.default.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z",strokeLinejoin:"round"}))),a.default.createElement("g",{transform:"matrix("+this.state.viewportTr+")"},a.default.createElement(f.default,{links:this.props.drawingData.links,containers:this.props.drawingData.data,selectedItem:this.props.drawingData.selectedItem,command:this.props.drawingData.selectedItem?this.props.drawingData.selectedItem.command:null,connectors:this.props.drawingData.selectedItem?this.props.drawingData.selectedItem.connectors:null,selectedMtx:this.state.selectedMtx}))),this.props.drawingData.selectedItem&&this.props.drawingData.selectedItem.objType!=ObjectTypes.TYPE_LINK&&this.props.drawingData.selectedItem.objType!=ObjectTypes.TYPE_EVENT?a.default.createElement(s.default,{selectedItem:this.props.drawingData.selectedItem,viewport:this.state,doRubberMouseDown:this.doRubberMouseDown}):null,a.default.createElement(v,null)))}}]),t}();t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0);(r=a)&&r.__esModule;var i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onDragDrop=n.onDragDrop.bind(n),n.calculateCache=n.calculateCache.bind(n),n.onMouseUpShell=n.onMouseUpShell.bind(n),n.renderItems=n.renderItems.bind(n),n.cache=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"calculateCache",value:function(e){var t=this;return e?e.map(function(e,n){return t.dorender(e,n,e.transform)}):null}},{key:"componentWillUpdate",value:function(e,t){e.children!==this.props.children&&(this.cache=null)}},{key:"onDragOver",value:function(e){e.preventDefault()}},{key:"onDragDrop",value:function(e){e.stopPropagation(),this.props.onDropIteminPage(e,this.props.item)}},{key:"onMouseUpShell",value:function(e){}},{key:"dorender",value:function(e,t,n){return RenderFactory.render(e,t,this.props.selectedItem,n,this.props.selectedTr,this.props.command,this.props.selectedBox,this.props.doObjectMouseDown,this.props.onDropIteminPage,this.props.onAddLink)}},{key:"renderItems",value:function(){if(this.cache||(this.cache=this.calculateCache(this.props.children)),this.props.item.selectedChild){var e=this.props.item.selectedChild,t=this.props.item.data.indexOf(e),n=this.props.item.selectedChild.id==this.props.selectedItem.id?this.props.selectedTr:e.transform;this.cache[t]=this.dorender(e,t,n)}return[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.cache))}},{key:"render",value:function(){return this.renderItems()}}]),t}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=u(o),i=u(n(2)),s=u(n(4));function u(e){return e&&e.__esModule?e:{default:e}}n(12);var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.calculateCoordinates=n.calculateCoordinates.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.selectedItem||e.viewport.viewportTr!==this.props.viewport.viewportTr||e.viewport.selectedTr!==this.props.viewport.viewportTr||e.viewport.parentTr!==this.props.viewport.viewportTr}},{key:"calculateCoordinates",value:function(){var e=s.default.calculateRubberBandPosition(this.props.viewport.selectedMtx,this.props.viewport.box,this.props.viewport.viewportMtx,this.props.viewport.parentMtx);return{x:e.x,y:e.y,w:e.w,h:e.h,transform:e.transform}}},{key:"render",value:function(){var e=this,t=this.calculateCoordinates();return a.default.createElement("svg",{id:"Rubberband",className:"rubberBand-Container",width:"100%",height:"100%",onMouseDown:function(t){e.props.doRubberMouseDown(t,i.default.MODE_RUBER_BAND_MOVE)}},a.default.createElement("g",{transform:"matrix("+t.transform+")"},a.default.createElement("rect",{ref:"ruberBandRect",className:"rubberBand",x:t.x,y:t.y,width:t.w,height:t.h}),a.default.createElement("rect",{ref:"ruberBandTopLeft",className:"rubberBandHandle",x:t.x-i.default.RUBBER_BAND_HANDLE_SIZE,y:t.y-i.default.RUBBER_BAND_HANDLE_SIZE,width:i.default.RUBBER_BAND_HANDLE_SIZE,height:i.default.RUBBER_BAND_HANDLE_SIZE,onMouseDown:function(t){e.props.doRubberMouseDown(t,i.default.MODE_RUBER_BAND_RESIZE_UL)}}),a.default.createElement("rect",{ref:"ruberBandTopRight",className:"rubberBandHandle",x:t.x+t.w,y:t.y-i.default.RUBBER_BAND_HANDLE_SIZE,width:i.default.RUBBER_BAND_HANDLE_SIZE,height:i.default.RUBBER_BAND_HANDLE_SIZE,onMouseDown:function(t){e.props.doRubberMouseDown(t,i.default.MODE_RUBER_BAND_RESIZE_UR)}}),a.default.createElement("rect",{ref:"ruberBandBottomLeft",className:"rubberBandHandle",x:t.x-i.default.RUBBER_BAND_HANDLE_SIZE,y:t.y+t.h,width:i.default.RUBBER_BAND_HANDLE_SIZE,height:i.default.RUBBER_BAND_HANDLE_SIZE,onMouseDown:function(t){e.props.doRubberMouseDown(t,i.default.MODE_RUBER_BAND_RESIZE_DL)}}),a.default.createElement("rect",{ref:"ruberBandBottomRight",className:"rubberBandHandle",x:t.x+t.w,y:t.y+t.h,width:i.default.RUBBER_BAND_HANDLE_SIZE,height:i.default.RUBBER_BAND_HANDLE_SIZE,onMouseDown:function(t){e.props.doRubberMouseDown(t,i.default.MODE_RUBER_BAND_RESIZE_DR)}}),a.default.createElement("circle",{ref:"ruberbandEvent",className:"rubberConnector",cx:t.x+t.w+2,cy:t.y+t.h/2,r:6,onMouseDown:function(t){e.props.doRubberMouseDown(t,i.default.MODE_RUBER_ADD_LINK_RIGHT)}}),a.default.createElement("circle",{ref:"ruberbandEvent",className:"rubberConnector",cx:t.x-2,cy:t.y+t.h/2,r:6,onMouseDown:function(t){e.props.doRubberMouseDown(t,i.default.MODE_RUBER_ADD_LINK_LEFT)}}),a.default.createElement("line",{x1:t.x+t.w/2,y1:t.y,x2:t.x+t.w/2,y2:t.y-t.h/2,className:"rubberBandHandle"}),a.default.createElement("circle",{cx:t.x+t.w/2,cy:t.y-t.h/2,r:7,className:"rubberBandHandle",onMouseDown:function(t){e.props.doRubberMouseDown(t,i.default.MODE_RUBER_BAND_ROTATE)}})))}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.matrixTransform=this.matrixTransform.bind(this),this.x=t,this.y=n}return r(e,[{key:"matrixTransform",value:function(e){var t=this.x,n=this.y;this.x=t*e.a+n*e.c+e.e,this.y=t*e.b+n*e.d+e.f}}]),e}();t.default=o},function(e,t,n){var r=n(13);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(6)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(5)(!1)).push([e.i,".rubberBand-Container{\n    pointer-events:none;\n    position:absolute;\n}\n.rubberBand{\n    fill:none;\n    pointer-events:none;\n    stroke:rgb(238, 99, 243);\n    stroke-width:1;\n    fill-opacity:0.0;\n    stroke-opacity:1;\n    stroke-dasharray:2\n}\n\n.rubberBandHandle{\n    fill:rgb(187, 187, 190);\n    pointer-events:fill;\n    stroke:#ee63f3;\n    stroke-width:1;\n    fill-opacity:1;\n    stroke-opacity:0.9;\n}\n\n.rubberConnector{\n    pointer-events:fill;\n    fill:white;\n    stroke:#ee63f3;\n    stroke-width:1;\n    fill-opacity:1;\n    stroke-opacity:0.9;\n}",""])},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var o,a=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?e:(o=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:r+a.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"pan",value:function(e,t,n){n.e-=e,n.f-=t}},{key:"zoom",value:function(e,t,n,r){r.e-=t,r.f-=n,r.a*=e,r.b*=e,r.c*=e,r.d*=e,r.e*=e,r.f*=e,r.e+=t,r.f+=n}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=l(o),i=l(n(17)),s=n(7),u=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}n(20);var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.prepareData=n.prepareData.bind(n),n.renderSelected=n.renderSelected.bind(n),n.prepareData(e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.links!==this.props.links||e.containers!==this.props.containers||e.selectedItem!==this.props.selectedItem||this.props.connectors!==e.connectors?(this.prepareData(e),!0):this.props.selectedMtx!==e.selectedMtx||this.props.command!==e.command}},{key:"prepareData",value:function(e){this.links=this.separateSelectedLinks(e.selectedItem,e.links)}},{key:"separateSelectedLinks",value:function(e,t){var n=e?e.id:null,r={selected:[],nonSelected:[]};if(!t)return r;if(!n)return r.nonSelected=t,r;if(e.objType===s.ObjectTypes.TYPE_LINK||e.objType===s.ObjectTypes.TYPE_EVENT){var o=t.indexOf(e),a=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t));return o>-1&&a.splice(o,1),r.nonSelected=a,r.selected.push(e),r}for(var i=0;i<t.length;i++)this.isSelected(t[i].start,n)||this.isSelected(t[i].end,n)?r.selected.push(t[i]):r.nonSelected.push(t[i]);return r}},{key:"isSelected",value:function(e,t){if(e===t)return!0;if(!e)return!1;var n=u.default.get(e);return this.isSelected(n.parent,t)}},{key:"renderSelected",value:function(){if(this.props.selectedItem)return a.default.createElement(i.default,{selectedItem:this.props.selectedItem,command:this.props.command,selectedMtx:this.props.selectedMtx,links:this.links.selected})}},{key:"render",value:function(){return a.default.createElement("g",null,a.default.createElement(i.default,{selectedItem:this.props.selectedItem,links:this.links.nonSelected}),this.renderSelected())}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=l(o),i=l(n(18)),s=l(n(19)),u=l(n(1));n(7);function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderLink=n.renderLink.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.links!==e.links||this.props.selectedItem!==e.selectedItem||this.props.selectedMtx!==e.selectedMtx||this.props.command!==e.command}},{key:"getConnector",value:function(e,t,n){var r=u.default.get(e).side;return{cor:s.default.getCoordinateFromPage(e,this.props.selectedItem,this.props.selectedMtx),side:r}}},{key:"renderLink",value:function(){var e=this,t=null;return this.props.links&&(t=this.props.links.map(function(t,n){return a.default.createElement(i.default,{key:n,start:e.getConnector(t.start,e.props.selectedItem,e.props.selectedMtx),end:e.getConnector(t.end,e.props.selectedItem,e.props.selectedMtx),creating:"*"==t.end,item:t,selected:t==e.props.selectedItem,color:t.color})})),t}},{key:"render",value:function(){return a.default.createElement("g",null,this.renderLink())}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),i=(r=a)&&r.__esModule?r:{default:r};var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.calculatePath=n.calculatePath.bind(n),n.onMouseDown=n.onMouseDown.bind(n),n.linkCoordinates=n.linkCoordinates.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"getCase",value:function(e,t){return SIDE_VERTICA}},{key:"calculatePath",value:function(e){return"M"+this.props.start.cor.x+" "+this.props.start.cor.y+"  "+e.cpt1.x+" "+e.cpt1.y+" "+e.cpt2.x+" "+e.cpt2.y+" "+this.props.end.cor.x+" "+this.props.end.cor.y}},{key:"linkCoordinates",value:function(){var e={x:0,y:0},t={x:0,y:0},n=0;switch(this.getCase(this.props.start.side,this.props.end.side)){case 111:n=this.props.start.cor.y+(this.props.end.cor.y-this.props.start.cor.y)/2,e={x:this.props.start.cor.x,y:n},t={x:this.props.end.cor.x,y:n};break;case 112:t=e={x:this.props.end.cor.x,y:this.props.start.cor.y};break;case 113:t=e={x:this.props.start.cor.x,y:this.props.end.cor.y};break;case 114:e={x:n=this.props.start.cor.x+(this.props.end.cor.x-this.props.start.cor.x)/2,y:this.props.start.cor.y},t={x:n,y:this.props.end.cor.y}}return{cpt1:e,cpt2:t}}},{key:"getMessageCoord",value:function(e){var t=0;return e.cpt1.y==e.cpt2.y?e.cpt1.y:e.cpt1.y<e.cpt2.y?(t=(e.cpt2.y-e.cpt1.y)/2,e.cpt1.y+t):(t=(e.cpt1.y-e.cpt2.y)/2,e.cpt2.y+t)}},{key:"onMouseDown",value:function(e){}},{key:"render",value:function(){var e=this.props.selected?"#ee63f3":this.props.color,t=this.linkCoordinates();this.getMessageCoord(t);return i.default.createElement("g",{pointerEvents:this.props.creating?"none":"all"},i.default.createElement("path",{d:this.calculatePath(t),stroke:e,strokeLinejoin:"round",fill:"transparent",strokeWidth:"3",markerEnd:"url(#arrow)",onMouseDown:this.onMouseDown}),i.default.createElement("circle",{cx:this.props.start.cor.x,cy:this.props.start.cor.y,r:"6",fill:"white",stroke:e,strokeWidth:"2"}))}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=i(n(1)),a=i(n(3));function i(e){return e&&e.__esModule?e:{default:e}}var s=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"getCoordinateFromPage",value:function(e,t,n){var r=null;return(r="*"===e?n:this.getCombineMatrix(e,t?t.id:"",n))?{x:r.trx,y:r.try}:{x:0,y:0}}},{key:"getCombineMatrix",value:function(e,t,n){if(!e)return null;var r=o.default.get(e),i=e===t?n:new a.default(r.transform),s=this.getCombineMatrix(r.parent,t,n);return s?s.multiply(i):i}}]),e}());t.default=s},function(e,t,n){var r=n(21);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(6)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(5)(!1)).push([e.i,".link-Manager{\n    pointer-events:none;\n    position:absolute;\n}",""])}])});